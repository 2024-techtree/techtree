<!DOCTYPE html>
<html lang="en" xmlns:th="http://www.thymeleaf.org">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>저축 기록 작성</title>
</head>
<body>
<h2>저축 기록 작성</h2>

<form action="/test2" method="post" th:object="${recordDto}">
    <label for="goalName">저축 목표 이름:</label>
    <select id="goalName" name="goalName" required>
        <option th:each="name : ${goalNames}" th:value="${name}" th:text="${name}" th:utext="${name}"></option>
    </select>
    <br>

    <label for="goalType">저축 목표 유형:</label>
    <select id="goalType" name="goalType" required>
        <option value="정기 예금">정기 예금</option>
        <option value="정기 적금">정기 적금</option>
        <option value="자유 적금">자유 적금</option>
        <!-- 다른 유형 추가 가능 -->
    </select>
    <br>

    <label for="savingPrice">저축 금액:</label>
    <input type="number" id="savingPrice" name="savingPrice" required>
    <br>

    <label for="savingDate">저축 일:</label>
    <input type="date" id="savingDate" name="savingDate" required>
    <br>

    <button type="submit">입력</button>
</form>
<script th:inline="javascript">
    function fetchGoalType() {
        var goalNameSelect = document.getElementById("goalName");
        var goalTypeSelect = document.getElementById("goalType");

        var selectedGoalName = goalNameSelect.options[goalNameSelect.selectedIndex].value;

        // Ajax 요청을 보내고, 서버에서 목표 유형을 가져와서 설정합니다.
        fetch('/fetchGoalType?goalName=' + selectedGoalName)
            .then(response => response.json())
            .then(data => {
                goalTypeSelect.value = data.goalType;
            })
            .catch(error => console.error('Error:', error));
    }
</script>
</body>
</html>
